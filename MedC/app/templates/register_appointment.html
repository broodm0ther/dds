{% extends "base.html" %}

{% block title %}Запись на приём{% endblock %}

{% block content %}
<h1>Запись на приём</h1>
<form action="/register/appointment" method="post">
    <label for="patient_id">Выберите пациента:</label>
    <select id="patient_id" name="patient_id" required>
        {% for patient in patients %}
            <option value="{{ patient.id }}">{{ patient.last_name }} {{ patient.first_name }}</option>
        {% endfor %}
    </select><br><br>

    <label for="doctor_id">Выберите врача:</label>
    <select id="doctor_id" name="doctor_id" required data-services='{{ services_by_specialization | tojson | safe }}'>
        <option value="" selected disabled>Выберите врача</option>
        {% for doctor in doctors %}
            <option value="{{ doctor.id }}" data-specialization="{{ doctor.specialization }}">
                {{ doctor.last_name }} {{ doctor.first_name }} - {{ doctor.specialization }}
            </option>
        {% endfor %}
    </select><br><br>

    <label for="service_id">Выберите услугу:</label>
    <select id="service_id" name="service_id" required>
        <option value="" selected disabled>Сначала выберите врача</option>
    </select><br><br>

    <!-- Скрытое поле для передачи выбранной услуги -->
    <input type="hidden" id="selected_service" name="service">

    <label for="appointment_day">Дата приёма:</label>
    <input type="date" id="appointment_day" name="appointment_day" required><br><br>

    <label for="appointment_time">Время приёма:</label>
    <input type="time" id="appointment_time" name="appointment_time" required><br><br>

    <button type="submit">Записать</button>
</form>

<!-- Подключаем JavaScript -->
<script src="{{ url_for('static', path='/js/update_services.js') }}"></script>

{% endblock %}
